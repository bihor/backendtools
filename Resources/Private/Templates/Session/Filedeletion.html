<html
        xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
        xmlns:core="http://typo3.org/ns/TYPO3/CMS/Core/ViewHelpers"
        xmlns:be="http://typo3.org/ns/TYPO3/CMS/Backend/ViewHelpers"
        data-namespace-typo3-fluid="true">
<f:layout name="Default" />
<f:section name="Content">
 <style>
  :root {
   --shadow: 0.3rem 0.3rem 0.6rem #aaddff,
   -0.2rem -0.2rem 0.5rem #ffffff;
  }
  #typo3-inner-docbody {padding-top: 4px;}
  input,select,table.table {
   -webkit-box-shadow: var(--shadow);
   box-shadow: var(--shadow);
  }
 </style>
<h1>Delete unused files in your uploads-folder</h1>
<f:flashMessages />
<f:form action="filedeletion">
<div style="margin: 10px 0;">
<p><strong>Choose a file...</strong> ... from here (relative path and file name):</p>
 fileadmin/ <f:form.textfield name="delfile" value="{delfile}" size="50" /><br><br>
 <f:form.radio name="convert" value="0" checked="{convert} == '0'" id="convert_no" /> <label for="convert_no">do not convert data</label> &nbsp; &nbsp;
 <f:form.radio name="convert" value="iso" checked="{convert} == 'iso'" id="convert_iso" /> <label for="convert_iso">convert data to ISO-8859-1</label> &nbsp; &nbsp;
 <f:form.radio name="convert" value="utf8" checked="{convert} == 'utf8'" id="convert_utf8" /> <label for="convert_utf8">convert data to UTF-8</label><br /><br />
 <f:form.radio name="bytes" value="0" checked="{bytes} == 0" id="bytes_no" /> <label for="bytes_no">donÂ´t show number of bytes</label> &nbsp; &nbsp;
 <f:form.radio name="bytes" value="1" checked="{bytes} == 1" id="bytes_yes" /> <label for="bytes_yes">show number of bytes</label><br /><br />
 <f:form.radio name="method" value="0" checked="{method} == 0" id="method_no" /> <label for="method_no">show only the content of this file</label> &nbsp; &nbsp;
 <f:form.radio name="method" value="1" checked="{method} == 1" id="method_yes" /> <label for="method_yes">delete the files listed in this file!!!</label><br /><br />
</div>
<f:form.submit name="killme" value="Show / delete files that are listed in this file" class="btn btn-primary" />
</f:form>
<br>
<f:if condition="{message}">
<f:then>
<p><f:format.raw>{message}</f:format.raw></p>
</f:then>
<f:else>
<p>Note: the file list in your text-file must contain file names with absolute path and the string "/uploads/"! E.g.<br />
/home/web/mydomain.com/uploads/pics/testfile.gif<br /><br />
Go to "Admin Tools -> DB check -> (Database) Relations" and copy the "files with no references at all" into a file in your fileadmin-folder
and this extension will delete that files for you.</p>
</f:else>
</f:if>
</f:section>
</html>